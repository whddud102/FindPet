<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="X-UA-Compatible" content="IE = edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="ContentTye" content="text/html; charset=utf-8">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
	integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
	crossorigin="anonymous">

<style type="text/css">
@import
	url('https://fonts.googleapis.com/css2?family=Gaegu:wght@700&display=swap');

@import url('https://fonts.googleapis.com/css?family=Do+Hyeon:400');
</style>

<title>유기동물 검색</title>
</head>
<body>
	<div class="container-fluid d-flex flex-column min-vh-100">

	
		<!-- Header -->
		<div class="sticky-top">
			<div th:insert="~{fragments/header::header}"></div>
		</div>
		<!-- /Header -->

		<!-- Main Row -->
		<div id="main_row" class="main-row row p-3 d-flex justify-content-center align-items-center" style="min-height: 87.2vh;">
			<div class="col-xl-6 col-lg-7 col-md-8 col-xs-12">
			
				<div class="text-center">
					<h3 style="font-family: 'Do Hyeon', sans-serif;">검색하고 싶은 항목을 선택해주세요</h3>
				</div>
				
				<div class="text-center">
					<h6 class="text-danger">모든 항목은 필수 선택이 아닙니다</h6>
				</div>
				
				<form>
					<hr>
					
					<div class="form-group row">
						<label class="col-md-4 col-form-label">검색 시작 날짜</label>
						<div class="col-md-8">
							<input type="date" id="bgnde" name="bgnde" class="form-control">
						</div>
					</div>
					
					<hr>
					
					<div class="form-group row">
						<label class="col-md-4 col-form-label">검색 종료 날짜</label>
						<div class="col-md-8">
							<input type="date" id="endde" name="endde" class="form-control">
						</div>
					</div>
					
					<hr>
					
					<div class="form-group row">
						<label class="col-md-4 col-form-label">축  종</label>
						<div class="col-md-8">
							<select id="upkind" name="upkind" class="form-control">
								<option value="all" selected>전체</option>
								<option value="417000">개</option>
								<option value="422400">고양이</option>
								<option value="429900">기타</option>
							</select>
						</div>
					</div>
					
					<hr>
					
					<div class="form-group row">
						<label class="col-md-4 col-form-label">품  종</label>
						<div class="col-md-8">
							<select id="kind" name="kind" class="form-control">
									<option value="all" selected>축종을 먼저 선택해주세요</option>
							</select>
						</div>
					</div>
					
					<hr>
					
					<div class="form-group row">
						<label class="col-md-4 col-form-label">시/도</label>
						<div class="col-md-8">
							<select id="upr_cd" name="upr_cd" class="form-control">
								<option value="all" selected>전체</option>
								<option value="6110000">서울</option>
								<option value="6260000">부산</option>
								<option value="6270000">대구</option>
								<option value="6280000">인천</option>
								<option value="6290000">광주</option>
								<option value="5690000">세종</option>
								<option value="6300000">대전</option>
								<option value="6310000">울산</option>
								<option value="6410000">경기</option>
								<option value="6420000">강원</option>
							</select>
						</div>
					</div>
					
					<hr>
					
					<div class="form-group row">
						<label class="col-md-4 col-form-label">시/군/구</label>
						<div class="col-md-8">
							<select id="org_cd" name="org_cd" class="form-control">
								<option value="" selected>시/도를 먼저 선택해주세요</option>
							</select>
						</div>
					</div>
					
					<hr>
					
					<div class="form-group row">
						<label class="col-md-4 col-form-label">보호소</label>
						<div class="col-md-8">
							<select id="shelter" name="shelter" class="form-control">
								<option selected>시/군/구를 먼저 선택해주세요</option>
							</select>
						</div>
					</div>
					
					<hr>
					
					<div class="form-group row">
						<label class="col-md-4 col-form-label">상  태</label>
						<div class="col-md-8">
							<select id="state" name="state" class="form-control">
								<option selected>전체</option>
								<option value="notice">공고중</option>
								<option value="protect">보호중</option>
							</select>
						</div>
					</div>
					
					<hr>
					
					<div class="form-group row">
						<label class="col-md-4 col-form-label">중성화 여부</label>
						<div class="col-md-8">
							<select id="neuter_yn" name="neuter_yn" class="form-control">
								<option selected>전체</option>
								<option value="y">예</option>
								<option value="n">아니오</option>
							</select>
						</div>
					</div>
					
					<hr>
					
					
					<div class="row d-flex justify-content-center">
						<div class="col-7 ">
							<button class="btn btn-primary btn-block font-weight-bold">검색 </button>
						</div>
					</div>
						
				</form>
				
				
			</div>
		</div>
		<!-- /.Main Row -->

		<!-- Footer -->
		<div th:insert="~{fragments/footer::footer}"></div>
		
		<!-- hidden input for info -->
		<input type="hidden" id="pageNo" name="pageNo" >
		<input type="hidden" id="endPage" name="endPage">
		<!-- /hidden input -->
		
	</div>
	<!-- /.Container -->

	<!-- Boot Strap -->
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
		integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
		integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
		crossorigin="anonymous"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
 	<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.js"></script>

	<!-- Count up Animation js -->	
 	 <script th:src="@{/js/jquery.rcounterup.js}" type="text/javascript"></script>
	<script th:src="@{/js/countup.js}" type="text/javascript"></script>
 	<!-- /Count up Animation js-->
 	
 	<!-- 유기동물 리스트 출력 함수 -->
 	<script th:src="@{/js/printList.js}" type="text/javascript"></script>
 	<!-- /.PrintList -->
 	
 	
	<script th:inline="javascript">
	$(document).ready(function() {
		
		// 동적으로 선택한 시/도에 맞는 시/군/구 목록을 불러오는 코드
		$('#upr_cd').change(function(){
			
			var upr_cd = $("#upr_cd option:selected").val();
			var option = '<option value="all" selected>전체</option>';
			
			if(upr_cd != 'all') {
				$.getJSON("/api/sigungu/" + upr_cd, function(list, textStatus, req) {
					
					
					$("#org_cd").html(option);
					$("#shelter").html('<option value="all" selected>시/군/구를 먼저 선택해주세요</option>');
					
					for(var i = 0; i < list.length; i++) {
						var sigungu = list[i];
						option = '<option value="' + sigungu.orgCd + '">' + sigungu.orgdownNm + '</option>';
						$("#org_cd").append(option);
					}
				});
			} else {
				$("#org_cd").html('<option value="all" selected>시/도를 먼저 선택해주세요</option>');
				$("#shelter").html('<option value="all" selected>시/군/구를 먼저 선택해주세요</option>');
			}
		});
		
		// 동적으로 선택한 시/군/구에 맞는 보호소 목록을 불러오는 코드
		$('#org_cd').change(function(){
			
			var upr_cd = $("#upr_cd option:selected").val();
			var org_cd = $("#org_cd option:selected").val();
			var option = '<option value="all" selected>전체</option>';
			
			
			if(upr_cd != 'all') {
				$.getJSON("/api/shelter/" + upr_cd + "/" + org_cd, function(list, textStatus, req) {
					
					console.log("====== 해당 보호소 =========");
					console.log(list);
					
					$("#shelter").html(option);
					
					for(var i = 0; i < list.length; i++) {
						var shelter = list[i];
						option = '<option value="' + shelter.careRegNo + '">' + shelter.careNm + '</option>';
						$("#shelter").append(option);
					}
				});
			}
		});
		
		// 동적으로 선택한 축종에 맞는 품종 목록을 불러오는 코드
		$('#upkind').change(function(){
			
			var upkind = $("#upkind option:selected").val();
			
			var option = '<option value="all" selected>전체</option>';
			
			if(upkind != 'all') {
				$.getJSON("/api/kind/" + upkind, function(list, textStatus, req) {
					
					$("#kind").html(option);
					
					for(var i = 0; i < list.length; i++) {
						var kind = list[i];
						
						option = '<option value="' + kind.kindCd + '">' + kind.knm + '</option>';
						$("#kind").append(option);
					}
				});
			} else {
				$("#kind").html(option);
			}
		});
		
	});
	
	</script>
</body>
</html>

